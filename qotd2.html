<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QOTD</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.png" type="image/png">
  <script type="text/javascript" src="react.production.min.js"></script>
  <script type="text/javascript" src="react-dom.production.min.js"></script>
  <script type="text/javascript" src="app.js" defer></script>
  <style>
    /* Existing styles from qotd.html */
    .qotd-frame {
        background: var(--glass-background);
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        border-radius: 10px;
        padding: 2rem;
        margin: 0 auto;
        max-width: 800px;
    }
    .qotd-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    .qotd-subject {
        color: #00FFFF;
        font-size: 1.2rem;
    }
    .qotd-date {
        color: #888;
        font-style: italic;
    }
    .qotd-specifics {
        color: #FFFFFF;
        margin-bottom: 1rem;
    }
    .qotd-question {
        font-size: 1.5rem;
        margin-bottom: 2rem;
    }
    .qotd-options {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    .qotd-options textarea {
        width: 100%;
        height: 150px;
        padding: 0.5rem;
        font-size: 1.5rem;
        border: 2px solid var(--primary-color);
        border-radius: 5px;
        resize: none;
        color: #FFFFFF;
        background-color: rgba(255, 255, 255, 0.1);
    }
    .qotd-submit {
        margin-top: 2rem;
        text-align: center;
    }
    #qotdSubmit {
        background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 5px;
        cursor: pointer;
        transition: all var(--transition-speed) ease;
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-family: 'Montserrat', sans-serif;
    }
    #qotdSubmit:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 255, 255, 0.4);
    }
    .feedback {
        margin-top: 1rem;
        padding: 1rem;
        border-radius: 5px;
        font-weight: bold;
        text-align: center;
        opacity: 1;
        transition: opacity 0.3s ease;
    }
    .feedback.correct {
        background-color: rgba(0, 255, 0, 0.2);
        color: #00ff00;
    }
    .feedback.incorrect {
        background-color: rgba(255, 0, 0, 0.2);
        color: #ff0000;
    }
    .feedback.hidden {
        opacity: 0;
    }
    .attempts {
        margin-top: 1rem;
        text-align: center;
        color: #888;
    }
    .multiple-choice-option {
        display: block;
        margin-bottom: 1rem;
        padding: 1rem;
        border: 2px solid var(--primary-color);
        border-radius: 5px;
        cursor: pointer;
        transition: all var(--transition-speed) ease;
        color: #FFFFFF;
        background-color: rgba(255, 255, 255, 0.1);
    }
    .multiple-choice-option:hover,
    .multiple-choice-option.selected {
        background-color: rgba(0, 255, 255, 0.2);
        transform: translateY(-2px);
        box-shadow: 0 2px 8px rgba(0, 255, 255, 0.4);
    }

    /* Updated navigation styles */
    .nav-button {
        background: none;
        border: none;
        padding: 0;
        cursor: pointer;
        transition: transform 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .nav-button img {
        width: 48px;
        height: 48px;
    }

    .nav-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .nav-button:not(:disabled):hover {
        transform: scale(1.1);
    }

    .qotd-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .nav-controls {
        display: flex;
        justify-content: space-between;
        width: 100%;
        max-width: 800px;
        margin-bottom: 1rem;
    }
  </style>
<script async="" src="js"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8W81FT4M1N');
</script></head>
<!-- Google tag (gtag.js) -->

<body>
  <nav id="sidebar">
    <ul>
      <li>
        <img src="favicon.png" style="width:50px;height:50px">
        <span class="logo">Interlink</span>
        <button onclick=toggleSidebar() id="toggle-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m313-480 155 156q11 11 11.5 27.5T468-268q-11 11-28 11t-28-11L228-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T468-692q11 11 11 28t-11 28L313-480Zm264 0 155 156q11 11 11.5 27.5T732-268q-11 11-28 11t-28-11L492-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T732-692q11 11 11 28t-11 28L577-480Z"/></svg>
        </button>
      </li>
      <li>
        <a href="index.html">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M240-200h120v-200q0-17 11.5-28.5T400-440h160q17 0 28.5 11.5T600-400v200h120v-360L480-740 240-560v360Zm-80 0v-360q0-19 8.5-36t23.5-28l240-180q21-16 48-16t48 16l240 180q15 11 23.5 28t8.5 36v360q0 33-23.5 56.5T720-120H560q-17 0-28.5-11.5T520-160v-200h-80v200q0 17-11.5 28.5T400-120H240q-33 0-56.5-23.5T160-200Zm320-270Z"/></svg>
          <span>Home</span>
        </a>
      </li>
      <li>
        <a href="dashboard.html">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M520-640v-160q0-17 11.5-28.5T560-840h240q17 0 28.5 11.5T840-800v160q0 17-11.5 28.5T800-600H560q-17 0-28.5-11.5T520-640ZM120-480v-320q0-17 11.5-28.5T160-840h240q17 0 28.5 11.5T440-800v320q0 17-11.5 28.5T400-440H160q-17 0-28.5-11.5T120-480Zm400 320v-320q0-17 11.5-28.5T560-520h240q17 0 28.5 11.5T840-480v320q0 17-11.5 28.5T800-120H560q-17 0-28.5-11.5T520-160Zm-400 0v-160q0-17 11.5-28.5T160-360h240q17 0 28.5 11.5T440-320v160q0 17-11.5 28.5T400-120H160q-17 0-28.5-11.5T120-160Zm80-360h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"/></svg>
          <span>Dashboard</span>
        </a>
      </li>
      <li>
        <button onclick=toggleSubMenu(this) class="dropdown-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="undefined"><path d="m300-300 280-80 80-280-280 80-80 280Zm180-120q-25 0-42.5-17.5T420-480q0-25 17.5-42.5T480-540q25 0 42.5 17.5T540-480q0 25-17.5 42.5T480-420Zm0 340q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Zm0-320Z"/></svg>
          <span>Explore</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"/></svg>
        </button>
        <ul class="sub-menu">
          <div>
            <li><a href="request.html">Request Form</a></li>
            <li><a href="ai.html">Interlink AI</a></li>
            <li><a href="tutoring.html">Tutoring</a></li>
            <li><a href="#">Simulations</a></li>
            <li><a href="qotd.html">QOTD</a></li>
            <li><a href="#">Quizlets</a></li>
            <li><a href="#">Tools</a></li>
          </div>
        </ul>
      </li>
      <li>
        <button onclick=toggleSubMenu(this) class="dropdown-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="undefined"><path d="M560-564v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-600q-38 0-73 9.5T560-564Zm0 220v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-380q-38 0-73 9t-67 27Zm0-110v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-490q-38 0-73 9.5T560-454ZM260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z"/></svg>
          <span>Study</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"/></svg>
        </button>
        <ul class="sub-menu">
          <div>
            <li><a href="#">Science</a></li>
            <li><a href="#">Math</a></li>
            <li><a href="#">English</a></li>
            <li><a href="#">History</a></li>
            <li><a href="#">Language</a></li>
            <li><a href="#">Fine Arts</a></li>
            <li><a href="#">Other</a></li>
          </div>
        </ul>
      </li>
      <li>
        <a href="calendar.html">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="undefined"><path d="M560-360q17 0 29.5-12.5T602-402q0-17-12.5-29.5T560-444q-17 0-29.5 12.5T518-402q0 17 12.5 29.5T560-360Zm-30-128h60q0-29 6-42.5t28-35.5q30-30 40-48.5t10-43.5q0-45-31.5-73.5T560-760q-41 0-71.5 23T446-676l54 22q9-25 24.5-37.5T560-704q24 0 39 13.5t15 36.5q0 14-8 26.5T578-596q-33 29-40.5 45.5T530-488ZM320-240q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320Zm0-80h480v-480H320v480ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-720v480-480Z"/></svg>
          <span>Q-Bank</span>
        </a>
      </li>
      <li>
        <a href="profile.html">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-240v-32q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v32q0 33-23.5 56.5T720-160H240q-33 0-56.5-23.5T160-240Zm80 0h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"/></svg>
          <span>Credits</span>
        </a>
      </li>
    </ul>
  </nav>
  <main class="fade-in">
    <div class="games-container">
        <h2 class="section-title glow-text">Today's Question</h2>
        <div id="root">
            <div class="qotd-container">
                <div class="nav-controls">
                    <button class="nav-button">
                        <img src="qotdBackwardHover.png" alt="Previous">
                    </button>
                    <button class="nav-button">
                        <img src="qotdForwardHover.png" alt="Next">
                    </button></div><div class="qotd-frame"><div class="qotd-header">
                        <span class="qotd-subject">
                            <strong>Pre-AP Algebra 1</strong>
                        </span>
                        <span class="qotd-date">12/27/2024</span>
                    </div>
                    <div class="qotd-specifics">4.1 Writing Equations in Slope-Intercept Form</div>
                    <div class="qotd-question glow-text">
                        <strong>Write the equation of the line passing through (0,5) with a slope of -2.</strong>
                    </div>
                    <div class="qotd-options">
                        <div class="multiple-choice-option" data-option="A) y=-2x+5">A) y=-2x+5</div>
                        <div class="multiple-choice-option" data-option="B) y=2x+5">B) y=2x+5</div>
                        <div class="multiple-choice-option" data-option="C) y=-2x-5">C) y=-2x-5</div>
                        <div class="multiple-choice-option" data-option="D) y=2x-5">D) y=2x-5</div>
                    </div><div class="qotd-submit"><button id="qotdSubmit">Submit</button></div>
                    <div id="feedback" class="feedback hidden"></div>
                    <div id="attempts" class="attempts" data-attempts="0">Attempts: 0/3</div>
                </div>
            </div>
        </div>
    </div>
</main>


<script type="module">

  // Create and mount the React component
  const { useState, useEffect } = React;
  const { createRoot } = ReactDOM;

  function QOTDNavigator() {
      const [questions, setQuestions] = useState([]);
      const [currentIndex, setCurrentIndex] = useState(0);
      const [loading, setLoading] = useState(true);
      const [answered, setAnswered] = useState(false);

      useEffect(() => {
          fetchQuestions();
      }, []);

      // Reset state when changing questions
      useEffect(() => {
          setAnswered(false);
          const feedbackElement = document.getElementById('feedback');
          const attemptsElement = document.getElementById('attempts');
          
          // Clear feedback with transition
          if (feedbackElement) {
              feedbackElement.classList.add('hidden');
              setTimeout(() => {
                  feedbackElement.textContent = '';
                  feedbackElement.className = 'feedback hidden';
              }, 300);
          }
          
          if (attemptsElement) {
              attemptsElement.textContent = 'Attempts: 0/3';
              attemptsElement.setAttribute('data-attempts', '0');
          }
          // Reset submit button
          const submitButton = document.getElementById('qotdSubmit');
          if (submitButton) submitButton.disabled = false;
          // Clear selected options
          document.querySelectorAll('.multiple-choice-option').forEach(opt => 
              opt.classList.remove('selected'));
          // Clear textarea if it exists
          const textarea = document.getElementById('freeResponseAnswer');
          if (textarea) textarea.value = '';
      }, [currentIndex]);

      async function fetchQuestions() {
          try {
              const response = await fetch('https://sheets.livepolls.app/api/spreadsheets/bc82dea8-d6f7-43dd-ac21-8d7de68f0d98/Sheet1');
              const data = await response.json();
              if (data.success) {
                  const sortedQuestions = data.data.sort((a, b) => new Date(a.Date) - new Date(b.Date));
                  setQuestions(sortedQuestions);
                  const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' });
                  const todayIndex = sortedQuestions.findIndex(q => q.Date === today);
                  setCurrentIndex(todayIndex !== -1 ? todayIndex : sortedQuestions.length - 1);
              }
              setLoading(false);
          } catch (error) {
              console.error('Error fetching questions:', error);
              setLoading(false);
          }
      }

      const goToPrevious = () => {
          if (currentIndex > 0) {
              setCurrentIndex(currentIndex - 1);
          }
      };

      const goToNext = () => {
          if (currentIndex < questions.length - 1) {
              setCurrentIndex(currentIndex + 1);
          }
      };

      const handleSubmit = (qotd) => {
          const feedbackElement = document.getElementById('feedback');
          const attemptsElement = document.getElementById('attempts');
          let attempts = parseInt(attemptsElement?.getAttribute('data-attempts') || '0');
          const maxAttempts = 3;

          attempts++;
          
          let userAnswer;
          const selectedOption = document.querySelector('.multiple-choice-option.selected');
          if (selectedOption) {
              userAnswer = selectedOption.getAttribute('data-option');
          } else {
              const textAnswer = document.getElementById('freeResponseAnswer');
              userAnswer = textAnswer ? textAnswer.value.trim() : '';
          }

          const correctAnswer = qotd.Correct1.trim();

          if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
              feedbackElement.textContent = 'Correct! Great job!';
              feedbackElement.className = 'feedback correct';
              document.getElementById('qotdSubmit').disabled = true;
              setAnswered(true);
          } else {
              feedbackElement.textContent = attempts >= maxAttempts ? 
                  `Incorrect. The correct answer was: ${correctAnswer}` : 
                  'Incorrect. Try again!';
              feedbackElement.className = 'feedback incorrect';
              if (attempts >= maxAttempts) {
                  document.getElementById('qotdSubmit').disabled = true;
                  setAnswered(true);
              }
          }

          if (attemptsElement) {
              attemptsElement.textContent = `Attempts: ${attempts}/${maxAttempts}`;
              attemptsElement.setAttribute('data-attempts', attempts.toString());
          }
      };

      const displayQOTD = (qotd) => {
          const hasOptions = qotd.Options && qotd.Options.trim() !== "";
          const options = hasOptions ? qotd.Options.split('\n') : [];

          return React.createElement('div', { className: 'qotd-container' },
              React.createElement('div', { className: 'nav-controls' },
                  React.createElement('button', {
                      className: 'nav-button',
                      onClick: goToPrevious,
                      disabled: currentIndex === 0
                  }, React.createElement('img', {
                      src: currentIndex === 0 ? 'qotdBackward.png' : 'qotdBackwardHover.png',
                      alt: 'Previous'
                  })),
                  React.createElement('button', {
                      className: 'nav-button',
                      onClick: goToNext,
                      disabled: currentIndex === questions.length - 1
                  }, React.createElement('img', {
                      src: currentIndex === questions.length - 1 ? 'qotdForward.png' : 'qotdForwardHover.png',
                      alt: 'Next'
                  }))
              ),
              React.createElement('div', { className: 'qotd-frame' },
                  React.createElement('div', { className: 'qotd-header' },
                      React.createElement('span', {
                          className: 'qotd-subject',
                          dangerouslySetInnerHTML: { __html: qotd.Subject }
                      }),
                      React.createElement('span', {
                          className: 'qotd-date'
                      }, qotd.Date)
                  ),
                  React.createElement('div', {
                      className: 'qotd-specifics'
                  }, qotd.Specifics),
                  React.createElement('div', {
                      className: 'qotd-question glow-text',
                      dangerouslySetInnerHTML: { __html: qotd.Question }
                  }),
                  React.createElement('div', { className: 'qotd-options' },
                      hasOptions ? 
                          options.map((option, index) =>
                              React.createElement('div', {
                                  key: index,
                                  className: 'multiple-choice-option',
                                  'data-option': option,
                                  onClick: (e) => {
                                      if (!answered) {
                                          document.querySelectorAll('.multiple-choice-option').forEach(opt => 
                                              opt.classList.remove('selected'));
                                          e.target.classList.add('selected');
                                      }
                                  }
                              }, option)
                          ) :
                          React.createElement('textarea', {
                              id: 'freeResponseAnswer',
                              placeholder: 'Type your answer here...',
                              disabled: answered
                          })
                  ),
                  React.createElement('div', { className: 'qotd-submit' },
                      React.createElement('button', {
                          id: 'qotdSubmit',
                          onClick: () => handleSubmit(qotd),
                          disabled: answered
                      }, 'Submit')
                  ),
                  React.createElement('div', { id: 'feedback', className: 'feedback hidden' }),
                  React.createElement('div', { id: 'attempts', className: 'attempts', 'data-attempts': '0' }, 'Attempts: 0/3')
              )
          );
      };

      if (loading) {
          return React.createElement('div', { className: 'text-center p-8' },
              React.createElement('p', null, 'Loading question of the day...')
          );
      }

      if (questions.length === 0) {
          return React.createElement('div', { className: 'text-center p-8' },
              React.createElement('p', null, 'No questions available.')
          );
      }

      const currentQuestion = questions[currentIndex];
      if (!currentQuestion) {
          return React.createElement('div', { className: 'text-center p-8' },
              React.createElement('p', null, 'Question not found.')
          );
      }

      return displayQOTD(currentQuestion);
  }

  // Create root and render app
  const root = createRoot(document.getElementById('root'));
  root.render(React.createElement(QOTDNavigator));

  // Load navigation and banner
  loadNav();
  loadBanner();
</script>
 
</body>
</html>